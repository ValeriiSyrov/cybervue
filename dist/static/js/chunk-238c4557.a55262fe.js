(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-238c4557"],{4971:function(e,t,i){},"9efa":function(e,t,i){},ad2a:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"categories-container"},[i("el-card",[i("el-header",[i("div",{staticClass:"categories-header"},[i("h3",[e._v("categories")]),e._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:e.showModal}},[e._v("\n\t\t\t\t\t\tAdd category\n\t\t\t\t\t")])],1)]),e._v(" "),i("el-main",{staticClass:"categories-main"},[i("el-row",{attrs:{gutter:20}},e._l(e.category.docs,function(t,a){return i("el-col",{key:a,attrs:{xs:24,sm:12,md:8,lg:8,xl:6}},[i("div",{staticClass:"categoty-item-container"},[i("img",{attrs:{src:"https://cybersp.herokuapp.com/"+t.img,alt:t.title}}),e._v(" "),i("div",{staticClass:"centered-block"},[i("div",{staticClass:"name-wrapper"},[i("span",[e._v(e._s(t.title))])]),e._v(" "),i("div",{staticClass:"btns-wrapper"},[i("el-button",{attrs:{type:"success",icon:"el-icon-edit-outline",circle:"",plain:""},on:{click:function(i){return e.showModal(t)}}}),e._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-delete",circle:"",plain:""},on:{click:function(i){return e.removeCategory(t._id)}}})],1)])])])}),1)],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"Edit category",visible:e.modal,width:"75%","before-close":e.handleClose},on:{"update:visible":function(t){e.modal=t}}},[i("el-form",{ref:"editableCategory",attrs:{model:e.editableCategory,rules:e.rules,"label-width":"150px"}},[i("el-form-item",{attrs:{label:"Title",prop:"title"}},[i("el-input",{attrs:{placeholder:"Title"},model:{value:e.editableCategory.title,callback:function(t){e.$set(e.editableCategory,"title",t)},expression:"editableCategory.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Description",prop:"description"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:15},placeholder:"Enter description"},model:{value:e.editableCategory.description,callback:function(t){e.$set(e.editableCategory,"description",t)},expression:"editableCategory.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Image",prop:"files"}},[i("input",{attrs:{type:"file"},on:{change:function(t){return e.onFileInput(t)}}})])],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleClose}},[e._v("Cancel")]),e._v(" "),i("el-button",{attrs:{type:this.editable_category?"success":"warning",plain:""},domProps:{textContent:e._s(this.editable_category?"Update":"Create")},on:{click:e.handleConfirm}})],1)],1)],1)},r=[],o=(i("2f62"),{name:"Categories",computed:{category:function(){return this.$store.state.home.categories}},data:function(){var e=this,t=function(e,t,i){t.trim().length>0?i():i(new Error("Please enter the correct title"))},i=function(e,t,i){t.trim().length>0?i():i(new Error("Please enter the correct description"))},a=function(t,i,a){i||e.editable_category?a():a(new Error("Please attach the file"))};return{modal:!1,editable_category:!1,editable_category_id:null,editableCategory:{title:"",description:"",files:""},rules:{title:[{required:!0,trigger:"blur",validator:t}],description:[{required:!0,trigger:"blur",validator:i}],files:[{required:!0,trigger:"blur",validator:a}]}}},methods:{showModal:function(e){this.modal=!0,e._id&&(this.editable_category=!0,this.editable_category_id=e._id,this.editableCategory.title=e.title,this.editableCategory.description=e.description)},onFileInput:function(e){this.editableCategory.files=e.target.files[0]},handleConfirm:function(){var e=this;this.$refs.editableCategory.validate(function(t){if(!t)return console.error("error submit!!"),!1;var i=new FormData;for(var a in e.editableCategory)e.editableCategory[a]&&i.append(a,e.editableCategory[a]);e.editable_category?e.editCategory(i):e.addCategory(i)})},addCategory:function(e){var t=this;this.$store.dispatch("categories/createCategory",e).then(function(e){t.handleClose()})},editCategory:function(e){var t=this;this.$store.dispatch("categories/updateCategory",[e,this.editable_category_id]).then(function(e){t.handleClose()})},removeCategory:function(e){var t=this;this.$store.dispatch("categories/deleteCategory",e).then(function(){t.$store.dispatch("categories/deleteCategoryFromList",e)})},handleClose:function(){this.$refs.editableCategory.resetFields(),this.modal=!1,this.editable_category=!1,this.editable_category_id=null,this.editableCategory={title:"",description:"",files:""}}}}),l=o,s=(i("cc6d"),i("b9e3"),i("2877")),n=Object(s["a"])(l,a,r,!1,null,"60c1193f",null);t["default"]=n.exports},b9e3:function(e,t,i){"use strict";var a=i("4971"),r=i.n(a);r.a},cc6d:function(e,t,i){"use strict";var a=i("9efa"),r=i.n(a);r.a}}]);